<div class="row">
  <div class="col-md-10 col-md-offset-1 col-sm-10 col-sm-offset-1">
    <h3>The Final COUNTDOWN 2017 <small>by VU Ent.</small></h3>

    <h2>Invitation <small>Total Users</small> ({{invitation_count}})</h2>

    <!-- add invitation modal -->
    <button type="button" class="sr-only btn btn-dark glyphicon glyphicon-plus" data-toggle="modal" data-target=".bs-add-modal-sm"></button>
    <div class="modal fade bs-add-modal-sm" tabindex="-1" role="dialog" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span>
            </button>
            <h4 class="modal-title" id="newModalLabel">New Invitation</h4>
          </div>
          <div class="modal-body">
            <form [formGroup]="invitation_form" class="form-horizontal form-label-left">
              <div class="form-group" [ngClass]="{'has-error':!invitation_form.controls['name'].valid}">
                <label class="control-label col-md-3 col-sm-3 col-xs-12" for="full-name">Full Name <span class="required">*</span>
                </label>
                <div class="col-md-6 col-sm-6 col-xs-12">
                  <input type="text" id="full-name" required placeholder="츄~" class="form-control col-md-7 col-xs-12" name="name" [formControl]="invitation_form.controls['name']">
                </div>
              </div>
              <div class="form-group" [ngClass]="{'has-error':!invitation_form.controls['mobile_number'].valid}">
                <label class="control-label col-md-3 col-sm-3 col-xs-12" for="mobile-number">Mobile Number <span class="required">*</span>
                </label>
                <div class="col-md-6 col-sm-6 col-xs-12">
                  <input type="text" id="mobile-number" name="mobile-number" required placeholder="01064060628" class="form-control col-md-7 col-xs-12" name="mobile_number" [formControl]="invitation_form.controls['mobile_number']">
                </div>
              </div>
              <div class="form-group">
                <label class="control-label col-md-3 col-sm-3 col-xs-12" for="birthday">Birthday
                </label>
                <div class="col-md-6 col-sm-6 col-xs-12">
                  <input type="text" id="birthday" class="form-control col-md-7 col-xs-12" placeholder="20160628" name="birthday" [formControl]="invitation_form.controls['birthday']">
                </div>
              </div>
              <div class="form-group">
                <label class="control-label col-md-3 col-sm-3 col-xs-12" for="email">Email
                </label>
                <div class="col-md-6 col-sm-6 col-xs-12">
                  <input type="text" id="email" class="form-control col-md-7 col-xs-12" placeholder="chu@rjkorea.com" name="email" [formControl]="invitation_form.controls['email']">
                </div>
              </div>
              <div class="form-group" [ngClass]="{'has-error':!invitation_form.controls['type'].valid}">
                <label class="control-label col-md-3 col-sm-3 col-xs-12">Invitation Type</label>
                <div class="col-md-6 col-sm-6 col-xs-12">
                  <select class="form-control" tabindex="-1" name="type" [formControl]="invitation_form.controls['type']">
                    <option></option>
                    <option value="30일(일반)">30일(일반)</option>
                    <option value="31일(일반)">31일(일반)</option>
                    <option value="30/31일(일반)">30/31일(일반)</option>
                  </select>
                </div>
              </div>
              <div class="form-group">
                <label class="control-label col-md-3 col-sm-3 col-xs-12" for="gender">Gender</label>
                <div class="col-md-6 col-sm-6 col-xs-12">
                  <div id="gender" class="btn-group">
                    <label class="btn btn-default" data-toggle-class="btn-primary" data-toggle-passive-class="btn-default">
                      <input type="radio" name="gender" value="male" [formControl]="invitation_form.controls['gender']"> &nbsp; Male &nbsp;
                    </label>
                    <label class="btn btn-default" data-toggle-class="btn-primary" data-toggle-passive-class="btn-default">
                      <input type="radio" name="gender" value="female" [formControl]="invitation_form.controls['gender']"> Female
                    </label>
                  </div>
                </div>
              </div>
              <div class="form-group">
                <label class="control-label col-md-3 col-sm-3 col-xs-12" for="group">Group
                </label>
                <div class="col-md-6 col-sm-6 col-xs-12">
                  <input type="text" id="group" class="form-control col-md-7 col-xs-12" placeholder="RJ Korea Entertainment" name="group" [formControl]="invitation_form.controls['group']">
                </div>
              </div>
              <div class="form-group">
                <label class="control-label col-md-3 col-sm-3 col-xs-12" for="assignee">Assignee
                </label>
                <div class="col-md-6 col-sm-6 col-xs-12">
                  <input type="text" id="assignee" class="form-control col-md-7 col-xs-12" placeholder="kim grae" name="assignee" [formControl]="invitation_form.controls['assignee']">
                </div>
              </div>
              <fieldset formGroupName="fee">
                <div class="form-group">
                  <label class="control-label col-md-3 col-sm-3 col-xs-12" for="enabled">Fee</label>
                  <div class="col-md-6 col-sm-6 col-xs-12">
                    <div class="checkbox">
                      <label>
                        <ui-switch size="small" formControlName="enabled"></ui-switch>
                      </label>
                    </div>
                  </div>
                </div>
                <div class="form-group">
                  <label class="control-label col-md-3 col-sm-3 col-xs-12" for="price">Fee Price
                  </label>
                  <div class="col-md-6 col-sm-6 col-xs-12">
                    <input type="number" id="price" class="form-control col-md-7 col-xs-12" placeholder=10000 name="price" formControlName="price">
                  </div>
                </div>
                <div class="form-group">
                  <label class="control-label col-md-3 col-sm-3 col-xs-12" for="method">Fee Method</label>
                  <div class="col-md-6 col-sm-6 col-xs-12">
                    <select class="form-control" tabindex="-1" name="method" formControlName="method">
                      <option></option>
                      <option value="cash">Cash</option>
                      <option value="creditcard">Creditcard</option>
                    </select>
                  </div>
                </div>
              </fieldset>
              <div class="ln_solid"></div>
              <div class="form-group">
                <div class="col-md-6 col-sm-6 col-xs-12 col-md-offset-3">
                  <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                  <button type="submit" class="btn btn-primary" data-dismiss="modal" [disabled]="!invitation_form.valid" (click)="addInvitation(invitation_form.value)">Done</button>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
    <!-- modal end -->

    <!-- edit invitation modal -->
    <div class="modal fade bs-edit-modal-sm" tabindex="-1" role="dialog" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span>
            </button>
            <h4 class="modal-title" id="editModalLabel">Edit Invitation</h4>
          </div>
          <div class="modal-body">
            <form [formGroup]="edit_invitation_form" class="form-horizontal form-label-left">
              <div class="form-group" [ngClass]="{'has-error':!edit_invitation_form.controls['name'].valid}">
                <label class="control-label col-md-3 col-sm-3 col-xs-12" for="full-name">Full Name <span class="required">*</span>
                </label>
                <div class="col-md-6 col-sm-6 col-xs-12">
                  <input type="text" id="full-name" required placeholder="츄~" class="form-control col-md-7 col-xs-12" name="name" [formControl]="edit_invitation_form.controls['name']">
                </div>
              </div>
              <div class="form-group" [ngClass]="{'has-error':!edit_invitation_form.controls['mobile_number'].valid}">
                <label class="control-label col-md-3 col-sm-3 col-xs-12" for="mobile-number">Mobile Number <span class="required">*</span>
                </label>
                <div class="col-md-6 col-sm-6 col-xs-12">
                  <input type="text" id="mobile-number" name="mobile-number" required placeholder="01064060628" class="form-control col-md-7 col-xs-12" name="mobile_number" [formControl]="edit_invitation_form.controls['mobile_number']">
                </div>
              </div>
              <div class="form-group">
                <label class="control-label col-md-3 col-sm-3 col-xs-12" for="birthday">Birthday
                </label>
                <div class="col-md-6 col-sm-6 col-xs-12">
                  <input type="text" id="birthday" class="form-control col-md-7 col-xs-12" placeholder="20160628" name="birthday" [formControl]="edit_invitation_form.controls['birthday']">
                </div>
              </div>
              <div class="form-group">
                <label class="control-label col-md-3 col-sm-3 col-xs-12" for="email">Email
                </label>
                <div class="col-md-6 col-sm-6 col-xs-12">
                  <input type="text" id="email" class="form-control col-md-7 col-xs-12" placeholder="chu@rjkorea.com" name="email" [formControl]="edit_invitation_form.controls['email']">
                </div>
              </div>
              <div class="form-group" [ngClass]="{'has-error':!edit_invitation_form.controls['type'].valid}">
                <label class="control-label col-md-3 col-sm-3 col-xs-12">Invitation Type</label>
                <div class="col-md-6 col-sm-6 col-xs-12">
                  <select class="form-control" tabindex="-1" name="type" [formControl]="edit_invitation_form.controls['type']">
                    <option></option>
                    <option value="30일(일반)">30일(일반)</option>
                    <option value="31일(일반)">31일(일반)</option>
                    <option value="30/31일(일반)">30/31일(일반)</option>
                  </select>
                </div>
              </div>
              <div class="form-group">
                <label class="control-label col-md-3 col-sm-3 col-xs-12" for="gender">Gender</label>
                <div class="col-md-6 col-sm-6 col-xs-12">
                  <div id="gender" class="btn-group">
                    <label class="btn btn-default" data-toggle-class="btn-primary" data-toggle-passive-class="btn-default">
                      <input type="radio" name="gender" value="male" [formControl]="edit_invitation_form.controls['gender']"> &nbsp; Male &nbsp;
                    </label>
                    <label class="btn btn-default" data-toggle-class="btn-primary" data-toggle-passive-class="btn-default">
                      <input type="radio" name="gender" value="female" [formControl]="edit_invitation_form.controls['gender']"> Female
                    </label>
                  </div>
                </div>
              </div>
              <div class="form-group">
                <label class="control-label col-md-3 col-sm-3 col-xs-12" for="entered">Entrance</label>
                <div class="col-md-6 col-sm-6 col-xs-12">
                  <div class="checkbox">
                    <label>
                      <ui-switch size="small" [formControl]="edit_invitation_form.controls['entered']"></ui-switch>
                    </label>
                  </div>
                </div>
              </div>
              <div class="form-group">
                <label class="control-label col-md-3 col-sm-3 col-xs-12" for="group">Group
                </label>
                <div class="col-md-6 col-sm-6 col-xs-12">
                  <input type="text" id="group" class="form-control col-md-7 col-xs-12" placeholder="RJ Korea Entertainment" name="group" [formControl]="edit_invitation_form.controls['group']">
                </div>
              </div>
              <div class="form-group">
                <label class="control-label col-md-3 col-sm-3 col-xs-12" for="assignee">Assignee
                </label>
                <div class="col-md-6 col-sm-6 col-xs-12">
                  <input type="text" id="assignee" class="form-control col-md-7 col-xs-12" placeholder="kim grae" name="assignee" [formControl]="edit_invitation_form.controls['assignee']">
                </div>
              </div>
              <fieldset formGroupName="fee">
                <div class="form-group">
                  <label class="control-label col-md-3 col-sm-3 col-xs-12" for="enabled">Fee</label>
                  <div class="col-md-6 col-sm-6 col-xs-12">
                    <div class="checkbox">
                      <label>
                        <ui-switch size="small" formControlName="enabled"></ui-switch>
                      </label>
                    </div>
                  </div>
                </div>
                <div class="form-group">
                  <label class="control-label col-md-3 col-sm-3 col-xs-12" for="price">Fee Price
                  </label>
                  <div class="col-md-6 col-sm-6 col-xs-12">
                    <input type="number" id="price" class="form-control col-md-7 col-xs-12" placeholder=10000 name="price" formControlName="price">
                  </div>
                </div>
                <div class="form-group">
                  <label class="control-label col-md-3 col-sm-3 col-xs-12" for="method">Fee Method</label>
                  <div class="col-md-6 col-sm-6 col-xs-12">
                    <select class="form-control" tabindex="-1" name="method" formControlName="method">
                      <option></option>
                      <option value="cash">Cash</option>
                      <option value="creditcard">Creditcard</option>
                    </select>
                  </div>
                </div>
              </fieldset>
              <div class="ln_solid"></div>
              <div class="form-group">
                <div class="col-md-6 col-sm-6 col-xs-12 col-md-offset-3">
                  <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                  <button type="submit" class="btn btn-primary" data-dismiss="modal" [disabled]="!edit_invitation_form.valid" (click)="editInvitation(edit_invitation_form.value)">Done</button>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
    <!-- modal end -->

    <!-- table -->
    <div class="row">
      <div class="col-md-12 col-sm-12">
        <label class="control-label" for="filter">Filter by Name or Mobile Number</label>
        <input type="text" id="filter" required placeholder="input keyword" class="form-control col-md-7 col-xs-12" name="filter" [(ngModel)]="filter_query">
        <table class="table table-striped table-responsive table-bordered" [mfData]="invitations | dataFilter: filter_query" #mf="mfDataTable" [mfRowsOnPage]="10">
          <thead>
            <tr>
              <th>#</th>
              <th>
                <mfDefaultSorter by="name">Name</mfDefaultSorter>
              </th>
              <th>Mobile Number</th>
              <th>Birthday</th>
              <th>Invitation Type</th>
              <th>Entrance</th>
              <th>Fee</th>
              <th>Group</th>
              <th>
                <mfDefaultSorter by="updated_at">UpdateDate</mfDefaultSorter>
              </th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let data of mf.data">
              <td>#</td>
              <td>{{data.name}}</td>
              <td>{{data.mobile_number}}</td>
              <td>{{data.birthday}}</td>
              <td>{{data.type}}</td>
              <td>
                <span *ngIf="data.entered"><strong>입장</strong></span>
                <span *ngIf="!data.entered">-</span>
              </td>
              <td>
                <span *ngIf="data.fee.enabled"><strong>○</strong></span>
                <span *ngIf="!data.fee.enabled">-</span>
              </td>
              <td>{{data.group}}</td>
              <td>{{data.updated_at | amFromUnix | amDateFormat:'YYYY-MM-DD HH:mm:ss'}}</td>
              <td>
                <button type="button" class="fa fa-edit" data-toggle="modal" data-target=".bs-edit-modal-sm" (click)="openEditInvitation(data)"></button>
              </td>
            </tr>
          </tbody>
          <tfoot>
            <tr>
              <td colspan="10">
                <mfBootstrapPaginator [rowsOnPageSet]="[5,10,15]"></mfBootstrapPaginator>
              </td>
            </tr>
          </tfoot>
        </table>
        <!-- table end -->
      </div>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-md-10 col-md-offset-1 col-sm-10 col-sm-offset-1">
    <p class="text-right">TKIT - Admin by <a href="http://rjkorea.com">RJ Korea Entertainment</a></p>
  </div>
</div>

<simple-notifications></simple-notifications>
