<div class="row">
  <div class="col-md-6 col-sm-6">
    <select class="form-control" [(ngModel)]="content_oid" (ngModelChange)="changeContent()">
      <ng-container *ngFor="let c of contents">
        <option [ngValue]="c._id">{{c.name}} ({{c.company.name}})</option>
      </ng-container>
    </select>
  </div>
</div>
<br>

<ng-template [ngIf]="!content_oid">
  <div class="row">
    <div class="col-md-3 col-sm-3">
      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title">전체 티켓</h3>
        </div>
        <div class="panel-body">
          <h1>
            {{total_ticket_count}}
            <small>장</small>
          </h1>
          <!--<span class="label label-default">전송준비{{total_ticket_count.pend}}</span>
          <span class="label label-warning">전송중{{total_ticket_count.send}}</span>
          <span class="label label-success">등록완료{{total_ticket_count.register}}</span>
          <span class="label label-info">입장완료{{total_ticket_count.use}}</span>
          <span class="label label-danger">취소{{total_ticket_count.cancel}}</span>-->
        </div>
      </div>
    </div>
    <div class="col-md-3 col-sm-3">
      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title">전체 회사</h3>
        </div>
        <div class="panel-body">
          <h1>{{total_company_count}} <small>사</small></h1>
          <!--<span class="label label-warning">26세 여자</span>
          <span class="label label-info">29세 남자</span>-->
        </div>
      </div>
    </div>
    <div class="col-md-3 col-sm-3">
      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title">전체 사용자</h3>
        </div>
        <div class="panel-body">
          <h1>{{total_user_count}} <small>명</small></h1>
          <!--<span class="label label-success">1,730,000원 현금</span>
          <span class="label label-danger">960,000원 신용카드</span>-->
        </div>
      </div>
    </div>
    <div class="col-md-3 col-sm-3">
      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title">전체 컨텐츠</h3>
        </div>
        <div class="panel-body">
          <h1>{{total_content_count}} <small>개</small></h1>
          <!--<span class="label label-success">1,730,000원 현금</span>
          <span class="label label-danger">960,000원 신용카드</span>-->
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-md-4 col-sm-4">
      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title">전체 성별비율</h3>
        </div>
        <div class="panel-body">
          <chart [type]="gender_chart.type" [data]="gender_chart.data" [options]="gender_chart.options"></chart>
        </div>
      </div>
    </div>
    <div class="col-md-4 col-sm-4">
      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title">전체 연령비율</h3>
        </div>
        <div class="panel-body">
          <chart [type]="age_chart.type" [data]="age_chart.data" [options]="age_chart.options"></chart>
        </div>
      </div>
    </div>
    <div class="col-md-4 col-sm-4">
      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title">최신 컨텐츠 Top 5</h3>
        </div>
        <div class="panel-body">
          <ul class="list-group">
            <ng-container *ngFor="let tc of top_contents">
              <li class="list-group-item"><span class="badge">{{tc.ticket_cnt}}</span>{{tc.content.name}}</li>
            </ng-container>
          </ul>
        </div>
      </div>
    </div>
  </div>
</ng-template>

<ng-template [ngIf]="content_oid">
  <div class="row">
    <div class="col-md-4 col-sm-4">
      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title">방문율</h3>
        </div>
        <div class="panel-body">
          <h1>{{((ticket_count.use/ticket_count.total)*100).toString() | slice:0:4}} <small>%</small></h1>
          <span class="label label-default">{{ticket_count.total}}명 초대권 대상자</span>
          <span class="label label-primary">{{ticket_count.use}}명 방문객</span>
        </div>
      </div>
    </div>
    <div class="col-md-4 col-sm-4">
      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title">평균연령</h3>
        </div>
        <div class="panel-body">
          <h1>{{(avg_age.female+avg_age.male)/2}} <small>세</small></h1>
          <span class="label label-warning">{{avg_age.female}}세 여자</span>
          <span class="label label-info">{{avg_age.male}}세 남자</span>
        </div>
      </div>
    </div>
    <div class="col-md-4 col-sm-4">
      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title">초대권 매출</h3>
        </div>
        <div class="panel-body">
          <h1>{{revenue.cash+revenue.creditcard}} <small>원</small></h1>
          <span class="label label-success">{{revenue.cash}}원 현금</span>
          <span class="label label-danger">{{revenue.creditcard}}원 신용카드</span>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-md-4 col-sm-4">
      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title">전체 성별비율</h3>
        </div>
        <div class="panel-body">
          <chart [type]="gender_chart.type" [data]="gender_chart.data" [options]="gender_chart.options"></chart>
        </div>
      </div>
    </div>
    <div class="col-md-4 col-sm-4">
      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title">전체 연령비율</h3>
        </div>
        <div class="panel-body">
          <chart [type]="age_chart.type" [data]="age_chart.data" [options]="age_chart.options"></chart>
        </div>
      </div>
    </div>
    <div class="col-md-4 col-sm-4">
      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title">티켓타입 Top 5</h3>
        </div>
        <div class="panel-body">
          <ul class="list-group">
            <ng-container *ngFor="let ttt of top_ticket_types">
              <li class="list-group-item"><span class="badge">{{ttt.ticket_cnt}}</span>{{ttt.ticket_type.name}}</li>
            </ng-container>
          </ul>
        </div>
      </div>
    </div>
  </div>
</ng-template>

<div class="row">
  <div class="col-md-10 col-md-offset-1 col-sm-10 col-sm-offset-1">
    <p class="text-right">
       TKIT - Admin by <a href="http://rjkorea.com">RJ Korea Entertainment</a>
    </p>
  </div>
</div>
